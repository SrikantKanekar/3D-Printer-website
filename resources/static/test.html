<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Test Page</title>
        <style>
            body {
                margin: 0;
                height: 100vh;
            }

            .canvas {
                position: fixed;
                top: 0;
                left: 0;
                outline: none;
            }
        </style>
        <!-- three js -->
        <script src="https://unpkg.com/three@0.129.0/build/three.js"></script>
        <script src="https://unpkg.com/three@0.129.0/examples/js/loaders/GLTFLoader.js"></script>
        <script src="https://unpkg.com/three@0.129.0/examples/js/controls/OrbitControls.js"></script>

        <!-- dat gui -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.js"
                integrity="sha512-u+vtyZDzyd0zgAEffKfoNx2BnCahAOBBYvzGu6vma1B18zQ6lEGF3F6dAFvqaxDoIU/GZRxcXV5oq23OIrkQwg=="
                crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    </head>
    <body>
        <canvas class="canvas"></canvas>
        <script>

            // Canvas
            const canvas = document.querySelector('.canvas');

            // scene and camera
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0xdddddd);

            const axesHelper = new THREE.AxesHelper(5);
            scene.add(axesHelper);

            const sizes = {
                width: window.innerWidth,
                height: window.innerHeight
            }

            camera = new THREE.PerspectiveCamera(75, sizes.width / sizes.height, 0.1, 1000);
            camera.position.set(5, 5, 5);

            const renderer = new THREE.WebGLRenderer({
                canvas: canvas,
                antialias: true
            });
            renderer.setSize(sizes.width, sizes.height);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // lightning
            ambientLight = new THREE.AmbientLight(0x404040, 0.5);
            scene.add(ambientLight);

            directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);

            light1 = new THREE.PointLight(0xc4c4c4, 0.5);
            light1.position.set(0, 300, 500);
            scene.add(light1);

            light2 = new THREE.PointLight(0xc4c4c4, 0.5);
            light2.position.set(500, 100, 0);
            scene.add(light2);

            light3 = new THREE.PointLight(0xc4c4c4, 0.5);
            light3.position.set(0, 100, -500);
            scene.add(light3);

            light4 = new THREE.PointLight(0xc4c4c4, 0.5);
            light4.position.set(-500, 300, 500);
            scene.add(light4);

            // Cube for testing
            const geometry = new THREE.BoxGeometry();
            const material = new THREE.MeshStandardMaterial({color: 0x00ff00});
            const cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            // // GLTF loader
            // let loader = new THREE.GLTFLoader();
            // loader.load('scene.gltf', function (gltf) {
            //     scene.add(gltf.scene);
            //     animate();
            // }, undefined, function (error) {
            //     console.error(error);
            // });

            let controls = new THREE.OrbitControls(camera, canvas);
            controls.enableDamping = true;
            controls.update();

            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }

            animate();

            window.addEventListener('resize', () => {
                // Update sizes
                sizes.width = window.innerWidth;
                sizes.height = window.innerHeight;

                // Update camera
                camera.aspect = sizes.width / sizes.height;
                camera.updateProjectionMatrix();

                // Update renderer
                renderer.setSize(sizes.width, sizes.height);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            });

            // Gui Controller
            const gui = new dat.GUI();

            const cubeFolder = gui.addFolder("Cube")
            cubeFolder.add(cube.rotation, "x", 0, Math.PI * 2, 0.01)
            cubeFolder.add(cube.rotation, "y", 0, Math.PI * 2, 0.01)
            cubeFolder.add(cube.rotation, "z", 0, Math.PI * 2, 0.01)

            const cameraFolder = gui.addFolder("Camera")
            cameraFolder.add(camera.position, "x", 0, 10, 0.01).listen()
            cameraFolder.add(camera.position, "y", 0, 10, 0.01).listen()
            cameraFolder.add(camera.position, "z", 0, 10, 0.01).listen()

        </script>
    </body>
</html>
